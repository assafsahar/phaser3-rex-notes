!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.rexvideoplugin=t():e.rexvideoplugin=t()}(window,function(){return function(e){var t={};function i(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=295)}({116:function(e,t,i){"use strict";const s=Phaser.Utils.Objects.GetValue;const r={id:["id",void 0],width:["width",void 0],height:["height",void 0],autoPlay:["autoplay",!0],controls:["controls",!1],loop:["loop",!1],poster:["poster",void 0],preload:["preload",void 0],muted:["muted",!1],playsInline:["playsInline",!0],crossOrigin:["crossOrigin","anonymous"]},a={canplay:"canplay",canplaythrough:"canplaythrough",ended:"ended",error:"error",loadstart:"loadstart",playing:"playing",pause:"pause",stalled:"stalled"};var n=function(e){var t,i,n=document.createElement("video");for(var o in r)t=r[o],void 0!==(i=s(e,o,t[1]))&&(n[t[0]]=i);var h=s(e,"eventEmitter",void 0);if(h)for(let e in a)n.addEventListener(a[e],function(){h.emit(e,this)}.bind(this));return n};const o=Phaser.Utils.Objects.IsPlainObject;const h=["webm","ogg","mp4","h264","vp9","hls"];var d=function(e,t,i){if(o(t))for(var s,r=0,a=h.length;r<a;r++)if(i[(s=h[r])+"Video"]&&t.hasOwnProperty(s)){t=t[s];break}e.src=t,e.load()};const u=Phaser.Utils.Objects.GetValue,c=Phaser.Math.Clamp;t.a=function(e){return class extends e{createVideoElement(e){return this.video||(void 0===e&&(e={}),e.eventEmitter=this,this.video=n(e),this.playbackTimeChangeEventEnable=u(e,"playbackTimeChangeEventEnable",!0)),this.video}preDestroy(){this.scene&&(this.video&&(this.video.pause(),this.video.removeAttribute("src"),this.video.load(),this.video=void 0),super.preDestroy&&super.preDestroy())}preUpdate(e,t){if(this.playbackTimeChangeEventEnable){var i=this.playbackTime;i!==this.prevT&&this.emit("playbacktimechange",this),this.prevT=i}super.preUpdate&&super.preUpdate(e,t)}get availableVideoTypes(){return this.scene.sys.game.device.video}load(e){return this.video&&d(this.video,e,this.availableVideoTypes),this}play(){return this.video&&this.video.play(),this}get isPlaying(){if(this.video){var e=this.video;return!e.paused&&!e.ended&&e.currentTime>0}return!1}pause(){return this.video&&this.video.pause(),this}get isPaused(){return!!this.video&&this.video.paused}get playbackTime(){return this.video&&this.video.currentTime||0}set playbackTime(e){if(this.video)try{this.video.currentTime=e}catch(e){}}setPlaybackTime(e){return this.playbackTime=e,this}get duration(){return this.video&&this.video.duration||0}get t(){if(this.video){var e=this.duration;return 0===e?0:this.playbackTime/e}return 0}set t(e){this.video&&(this.playbackTime=this.duration*c(e,0,1))}setT(e){return this.t=e,this}get hasEnded(){return!!this.video&&this.video.ended}get volume(){return this.video&&this.video.volume||0}set volume(e){this.video&&(this.video.volume=e)}setVolume(e){return this.volume=e,this}get muted(){return this.video&&this.video.muted||!1}set muted(e){this.video&&(this.video.muted=e)}setMute(e){return void 0===e&&(e=!0),this.muted=e,this}get loop(){return!!this.video&&this.video.loop}set loop(e){this.video&&(this.video.loop=e)}setLoop(e){return void 0===e&&(e=!0),this.loop=e,this}get readyState(){return this.video?this.video.readyState:void 0}}}},12:function(e,t,i){"use strict";i.r(t);t.default=function(){}},2:function(e,t,i){"use strict";var s=function(e){return null==e||""===e||0===e.length};t.a=function(e,t,i){if("object"==typeof e)if(s(t)){if(null==i)return;"object"==typeof i&&(e=i)}else{"string"==typeof t&&(t=t.split("."));var r=t.pop();((function(e,t,i){void 0===i&&(i={});var r=e;if(s(t));else{var a;"string"==typeof t&&(t=t.split("."));for(var n=0,o=t.length;n<o;n++){var h;null!=r[a=t[n]]&&"object"==typeof r[a]||(h=n===o-1?i:{},r[a]=h),r=r[a]}}return r})(e,t))[r]=i}}},248:function(e,t,i){"use strict";var s=i(82);t.a=function(e,t,i,r,a){var n=new s.a(this.scene,e,t,i,r,a);return this.scene.add.existing(n),n}},249:function(e,t,i){"use strict";var s=i(82);const r=Phaser.Utils.Objects.GetAdvancedValue,a=Phaser.GameObjects.BuildGameObject;t.a=function(e,t){var i=r(e,"width",void 0),n=r(e,"height",void 0);void 0!==t&&(e.add=t);var o=new s.a(this.scene,0,0,i,n,e);return a(this.scene,o,e),o}},250:function(e,t,i){"use strict";var s=i(83);t.a=function(e,t,i,r,a){var n=new s.a(this.scene,e,t,i,r,a);return this.scene.add.existing(n),n}},251:function(e,t,i){"use strict";var s=i(83);const r=Phaser.Utils.Objects.GetAdvancedValue,a=Phaser.GameObjects.BuildGameObject;t.a=function(e,t){var i=r(e,"width",void 0),n=r(e,"height",void 0);void 0!==t&&(e.add=t);var o=new s.a(this.scene,0,0,i,n,e);return a(this.scene,o,e),o}},295:function(e,t,i){"use strict";i.r(t);var s=i(248),r=i(249),a=i(250),n=i(251),o=i(82),h=i(83),d=i(2);Object(d.a)(window,"RexPlugins.GameObjects.Video",o.a),Object(d.a)(window,"RexPlugins.GameObjects.VideoCanvas",h.a),t.default=class extends Phaser.Plugins.BasePlugin{constructor(e){super(e),e.registerGameObject("rexVideo",s.a,r.a),e.registerGameObject("rexVideoCanvas",a.a,n.a)}start(){this.game.events.once("destroy",this.destroy,this)}}},41:function(e,t,i){"use strict";const s=Phaser.Renderer.WebGL.Utils;var r=function(e,t,i,r,a){if(t.dirty&&(t.updateTexture(),t.dirty=!1),0!==t.width&&0!==t.height){var n=t.frame,o=n.width,h=n.height,d=s.getTintAppendFloatAlpha;this.pipeline.batchTexture(t,n.glTexture,o,h,t.x,t.y,o/t.resolution,h/t.resolution,t.scaleX,t.scaleY,t.rotation,t.flipX,t.flipY,t.scrollFactorX,t.scrollFactorY,t.displayOriginX,t.displayOriginY,0,0,o,h,d(t._tintTL,r.alpha*t._alphaTL),d(t._tintTR,r.alpha*t._alphaTR),d(t._tintBL,r.alpha*t._alphaBL),d(t._tintBR,r.alpha*t._alphaBR),t._isTinted&&t.tintFill,0,0,r,a)}},a=function(e,t,i,s,r){0!==t.width&&0!==t.height&&e.batchSprite(t,t.frame,s,r)},n=i(12),o=(n.default,n.default,{renderWebGL:r,renderCanvas:a});const h=Phaser.Display.Color;var d={clear(){return this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},fill(e){return this.context.fillStyle=e,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this},getPixel(e,t,i){void 0===i&&(i=new h);var s=this.context.getImageData(e,t,1,1);return i.setTo(s.data[0],s.data[1],s.data[2],s.data[3]),i},setPixel(e,t,i,s,r,a){if("number"!=typeof i){var n=i;i=n.red,s=n.green,r=n.blue,a=n.alpha}void 0===a&&(a=0!==i||0!==s||0!==r?255:0);var o=this.context.createImageData(1,1);return o.data[0]=i,o.data[1]=s,o.data[2]=r,o.data[3]=a,this.context.putImageData(o,e,t),this.dirty=!0,this}},u={updateTexture(e,t){e&&(t?e.call(t,this.canvas,this.context):e(this.canvas,this.context)),this.canvas.width===this.frame.width&&this.canvas.height===this.frame.height||this.frame.setSize(this.canvas.width,this.canvas.height),this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(this.canvas,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!1;var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=this.width,i.hitArea.height=this.height),this},generateTexture(e,t,i,s,r){var a,n=this.canvas,o=this.scene.sys,h=o.game.renderer;void 0===t&&(t=0),void 0===i&&(i=0),void 0===s?s=n.width:s*=this.resolution,void 0===r?r=n.height:r*=this.resolution;var d=(a=o.textures.exists(e)?o.textures.get(e):o.textures.createCanvas(e,s,r)).getSourceImage();d.width!==s&&(d.width=s),d.height!==r&&(d.height=r);var u=d.getContext("2d");return u.clearRect(0,0,s,r),u.drawImage(n,t,i,s,r),h.gl&&a&&h.canvasToTexture(d,a.source[0].glTexture,!0,0),this},loadTexture(e,t){var i=this.scene.textures.getFrame(e,t);return i?(this.width!==i.cutWidth||this.height!==i.cutHeight?this.resize(i.cutWidth,i.cutHeight):this.context.clearRect(0,0,i.cutWidth,i.cutHeight),this.context.drawImage(i.source.image,i.cutX,i.cutY,i.cutWidth,i.cutHeight,0,0,this.canvas.width,this.canvas.height),this.dirty=!0,this):this}};const c=Phaser.Display.Canvas.CanvasPool,l=Phaser.GameObjects.Components,v=Phaser.GameObjects.GameObject;var p=new Phaser.Class({Extends:v,Mixins:[l.Alpha,l.BlendMode,l.ComputedSize,l.Crop,l.Depth,l.Flip,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.ScrollFactor,l.Tint,l.Transform,l.Visible,o,d,u],initialize:function(e,t,i,s,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===s&&(s=1),void 0===r&&(r=1),v.call(this,e,"rexCanvas"),this.renderer=e.sys.game.renderer,this.resolution=e.sys.game.config.resolution,this.canvas=c.create(this,this.resolution*s,this.resolution*r),this.context=this.canvas.getContext("2d"),this.dirty=!1,this.setPosition(t,i),this.setSize(s,r),this.setOrigin(.5,.5),this.initPipeline(),this._crop=this.resetCropObject(),this.texture=e.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),e.sys.game.config.renderType===Phaser.WEBGL&&e.sys.game.renderer.onContextRestored(function(){this.dirty=!0},this),this.dirty=!0},getCanvas:function(e){return e||(this.dirty=!0),this.canvas},needRedraw:function(){return this.dirty=!0,this},preDestroy:function(){c.remove(this.canvas)},resize:function(e,t){return this.width===e&&this.height===t?this:(this.setSize(e,t).updateDisplayOrigin(),e*=this.resolution,t*=this.resolution,e=Math.max(Math.ceil(e),1),t=Math.max(Math.ceil(t),1),this.canvas.width=e,this.canvas.height=t,this.dirty=!0,this)}});t.a=p},82:function(e,t,i){"use strict";var s=i(116);const r=Phaser.GameObjects.DOMElement,a=Phaser.Utils.Objects.IsPlainObject,n=Phaser.Utils.Objects.GetValue;t.a=class extends(Object(s.a)(r)){constructor(e,t,i,s,r,o){a(t)?(t=n(o=t,"x",0),i=n(o,"y",0),s=n(o,"width",void 0),r=n(o,"height",void 0)):a(s)&&(s=n(o=s,"width",void 0),r=n(o,"height",void 0)),void 0===o&&(o={});var h=e.scale.autoRound;void 0!==s&&(h&&(s=Math.floor(s)),o.width=s),void 0!==r&&(h&&(r=Math.floor(r)),o.height=r),super(e,t,i),this.type="rexVideo",this.setElement(this.createVideoElement(o)).load(n(o,"src",""))}resize(e,t){return this.width===e&&this.height===t?this:(this.node.width=e,this.node.height=t,this.updateSize(),this)}}},83:function(e,t,i){"use strict";var s=i(116),r=i(41);const a=Phaser.Utils.Objects.IsPlainObject,n=Phaser.Utils.Objects.GetValue;t.a=class extends(Object(s.a)(r.a)){constructor(e,t,i,s,r,o){a(t)?(t=n(o=t,"x",0),i=n(o,"y",0),s=n(o,"width",void 0),r=n(o,"height",void 0)):a(s)&&(s=n(o=s,"width",void 0),r=n(o,"height",void 0)),void 0===o&&(o={});var h=e.scale.autoRound;void 0!==s&&(h&&(s=Math.floor(s)),o.width=s),void 0!==r&&(h&&(r=Math.floor(r)),o.height=r),super(e,t,i,s,r),this.type="rexVideoCanvas",this.createVideoElement(o),this.load(n(o,"src",""))}renderWebGL(e,t,i,s,r){if(this.readyState>0)this.renderer.canvasToTexture(this.video,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture;else{var a=(e=this.renderer).gl;a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT),e.setFramebuffer(null,!0)}super.renderWebGL(e,t,i,s,r)}renderCanvas(e,t,i,s,r){this.readyState>0?this.context.drawImage(this.video,0,0,this.canvas.width,this.canvas.height):this.context.clearRect(0,0,this.canvas.width,this.canvas.height),super.renderCanvas(e,t,i,s,r)}resize(e,t){return this.width===e&&this.height===t?this:(this.video.width=e,this.video.height=t,super.resize(e,t),this)}}}}).default});